---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

interface Props {
    sitat: string;
    kilde: string;
    imagePath?: string;
    imageFilter?: string;
    altText: string;
}

const { sitat, kilde, imagePath="transparent.png", imageFilter="0.7", altText="image"} = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>('/src/images/projects/*.{jpeg,jpg,png,gif}');
if (!images["/src/images/projects/" + imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/images/projects/*.{jpeg,jpg,png,gif}"`);
---
<div class="blockquoteWrapper">
    <div class="text">
        <blockquote>
            <p>
                {sitat}
            </p>
        </blockquote>
        <cite><span>â€“</span>{kilde}</cite>
    </div>
    
    <div class="imageWrapper">
        <Image src={images["/src/images/projects/" + imagePath]()} alt={altText} style={"filter:brightness(" + imageFilter + ");"}/>
    </div>

    

    <!-- <Image src={images["/src/images/projects/" + imagePath]()} alt={altText} style="filter:brightness(0.5);"/> -->
</div>

<style>
    .blockquoteWrapper{
        display: grid;
        grid-template-columns: 1fr;
        margin: 3rem auto;
        justify-content: center;  
        align-content: center;
        max-width: var(--contentWidthLarge);
    }

    .blockquoteWrapper *{
        margin: 0 auto;
    }

    .blockquoteWrapper .text{
        z-index: 1;
        grid-area: 1/1/1/1;
        place-self: center;
        max-width: var(--contentWidthMedium);;
    }

    .blockquoteWrapper .text *{
        margin: 2% auto;
    }

    blockquote p{
        font-family: "arno-pro", serif;
        font-weight: 400;
        font-style: italic;
        font-size: 2.5rem;
        line-height: 1.2em;
        padding-top: 1em;
    }

    cite{
        font-size: 1.35rem;
        line-height: 1.35em;
        margin-top: 10rem;
        width: fit-content;
        max-width: 40ch;
        display: flex;
        flex-direction: row;
        align-items: baseline;
        justify-content: center;
        gap: 1ch;
    }

    blockquote p, cite {
        text-shadow: 0px var(--shadowOffset) var(--blurRadius) var(--shadowColor);
    }

    .imageWrapper{
        z-index: 0;
        grid-area: 1/1/1/1;
        width: 100%;
        margin-bottom: 5rem;
        margin-right: 5rem;
        display: grid;
        grid-template-columns: 1fr;
    }
    img{
        max-height: 85svh;
        height: auto;
        width: 100%;
        max-width: calc(100svw - 4rem);
        object-fit: cover;
        z-index: 0;
    }

</style>